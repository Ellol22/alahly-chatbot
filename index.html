<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Alahly Chatbot — المساعد الأهلاوي</title>
  <style>
    :root {
      --bg: #050505;
      --accent: #c8102e;
      --muted: #9aa6b2;
      --glass: rgba(255, 255, 255, 0.03);
      font-family: "Cairo", "Segoe UI", Tahoma, sans-serif;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    html, body { 
      height: 100%; 
      background: var(--bg); 
      color: #f2f5f7; 
      overflow: hidden;
    }
    
    body { 
      display: flex; 
      flex-direction: column;
      padding: 8px;
      gap: 8px;
      min-height: 100dvh;
    }

    .page {
      flex: 1;
      max-width: 1400px;
      margin: 0 auto;
      border-radius: 16px;
      overflow: hidden;
      display: grid;
      grid-template-columns: minmax(280px, 360px) 1fr;
      gap: 14px;
      box-shadow: 0 12px 36px rgba(0,0,0,0.7);
      background: linear-gradient(180deg, rgba(2,2,2,0.9), rgba(7,7,7,0.95));
      position: relative;
      padding: 14px;
    }

    .left {
      background: linear-gradient(180deg, rgba(12,12,12,0.95), rgba(6,6,6,0.85));
      padding: 16px;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      overflow-y: auto;
      max-height: 100%;
      -webkit-overflow-scrolling: touch;
    }

    .brand { display: flex; gap: 10px; align-items: center; }
    .brand .logo {
      width: 56px; height: 56px; border-radius: 10px;
      background: linear-gradient(135deg, var(--accent), #8b0b1a);
      display: flex; align-items: center; justify-content: center;
      font-weight: 800; font-size: 18px; color: #fff;
    }
    .brand h1 { margin: 0; font-size: 18px; }
    .brand .sub { color: var(--muted); font-size: 12px; }

    .quick { display: flex; flex-direction: column; gap: 7px; }
    .chip {
      background: var(--glass);
      border-radius: 10px;
      padding: 9px 11px;
      cursor: pointer;
      font-weight: 600; color: #fff; font-size: 14px;
      display: flex; justify-content: space-between; align-items: center;
    }
    .chip .k { color: var(--muted); font-size: 12px; }

    .right {
      background: linear-gradient(180deg, rgba(4,4,4,0.6), rgba(8,8,8,0.6));
      padding: 16px;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      /* مهم: الـ right كله مش هيسكرول */
    }

    /* ===== الـ header ثابت ===== */
    .chat-header {
      flex-shrink: 0;
      padding-bottom: 8px;
      border-bottom: 1px solid rgba(255,255,255,0.03);
    }
    .chat-header .title { font-weight: 700; font-size: 17px; }
    .chat-header .subtitle { color: var(--muted); font-size: 12px; }

    /* ===== الـ messages: السكرول الحقيقي ===== */
    .messages {
      flex: 1;
      min-height: 0; /* مهم جدًا */
      overflow-y: auto;
      padding: 12px 4px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      -webkit-overflow-scrolling: touch;
      scroll-behavior: smooth;
    }

    .msg {
      max-width: 80%; 
      padding: 11px 13px;
      border-radius: 12px; 
      line-height: 1.55;
      box-shadow: 0 6px 16px rgba(0,0,0,0.5);
      animation: pop .18s ease;
      white-space: pre-wrap; 
      word-break: break-word;
      font-size: 14.5px;
    }
    @keyframes pop { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }

    .msg.user {
      margin-left: auto;
      background: rgba(255,255,255,0.04);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.03);
    }
    .msg.bot {
      margin-right: auto;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-left: 4px solid var(--accent);
      color: #fff;
    }

    .meta-time { font-size: 11px; color: var(--muted); margin-top: 5px; }

    /* ===== حقل الكتابة: مثبت في الأسفل ===== */
    .compose {
      flex-shrink: 0;
      display: flex; 
      gap: 8px; 
      align-items: center;
      margin-top: 12px;
    }
    .compose input {
      flex: 1; 
      padding: 11px;
      border-radius: 12px; 
      border: 0;
      background: var(--glass); 
      color: #fff;
      outline: none; 
      font-size: 14.5px;
    }
    .compose button {
      background: var(--accent);
      border: 0; 
      padding: 9px 14px;
      border-radius: 10px; 
      color: #fff;
      font-weight: 700; 
      cursor: pointer;
      font-size: 14px;
    }

    /* ===== موبايل ===== */
    @media (max-width: 980px) {
      .page { 
        grid-template-columns: 1fr; 
        padding: 10px;
        gap: 10px;
      }
      .left { 
        order: 2; 
        max-height: 38dvh;
        overflow-y: auto;
      }
      .right { order: 1; }
    }

    @media (max-width: 600px) {
      .page { padding: 8px; gap: 8px; }
      .left, .right { padding: 12px; }
      .msg { font-size: 14px; padding: 10px 12px; }
    }
  </style>
</head>
<body>
  <div class="page">
    <aside class="left">
      <div class="brand">
        <div class="logo">AH</div>
        <div>
          <h1>Alahly Chatbot</h1>
          <div class="sub">المساعد الأهلاوي</div>
        </div>
      </div>
      <div class="quick">
        <div class="chip" onclick="askQuick('مين اللعيبة في الاهلي؟')">اللعيبة؟ <span class="k">التشكيلة</span></div>
        <div class="chip" onclick="askQuick('كل البطولات التي فاز بها الاهلي')">كل البطولات <span class="k">القائمة الكاملة</span></div>
      </div>
    </aside>

    <main class="right">
      <div class="chat-header">
        <div>
          <div class="title">Alahly Chatbot</div>
          <div class="subtitle">اسألني عن الأهلي</div>
        </div>
      </div>

      <!-- هنا السكرول الحقيقي -->
      <div class="messages" id="messages"></div>

      <div class="compose">
        <input id="input" placeholder="اكتب سؤالك..." />
        <button id="sendBtn">إرسال</button>
      </div>
    </main>
  </div>

  <script>
    const messagesEl = document.getElementById("messages");
    const inputEl = document.getElementById("input");
    const sendBtn = document.getElementById("sendBtn");

    function addMessage(text, who = "bot") {
      const el = document.createElement("div");
      el.className = "msg " + (who === "user" ? "user" : "bot");
      el.innerHTML = text;
      const time = document.createElement("div");
      time.className = "meta-time";
      time.textContent = new Date().toLocaleTimeString("ar-EG", { hour: "2-digit", minute: "2-digit" });
      el.appendChild(time);
      messagesEl.appendChild(el);
      // سكرول تلقائي للأسفل
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }

    addMessage("أهلاً! أنا Alahly Chatbot — اسألني عن اللاعبين، البطولات، أو أي حاجة تخص الأهلي.");

    function getReply(raw) {
      const msg = raw.trim().toLowerCase();
      if (msg.includes("لعيبة") || msg.includes("التشكيلة")) {
        return `تشكيلة الأهلي الحالية (محدثة):\n\n` +
          `حارس مرمى:\n  - محمد الشناوي (مصر)\n  - مصطفى شوبير (مصر)\n  - حمزة علاء (مصر)\n\n` +
          `مدافع:\n  - ياسر إبراهيم (مصر)\n  - محمد هاني (مصر)\n  - رامي ربيعة (مصر)\n  - أشرف داري (المغرب)\n\n` +
          `خط وسط:\n  - أليو ديانج (مالي)\n  - مروان عطية (مصر)\n  - إمام عاشور (مصر)\n  - محمد مجدي أفشة (مصر)\n\n` +
          `مهاجم:\n  - حسين الشحات (مصر)\n  - بيرسي تاو (جنوب أفريقيا)\n  - أشرف بن شرقي (المغرب)\n  - محمود كهربا (مصر)\n\n` +
          `المدرب: جيس ثوروب\nالكابتن: محمد الشناوي\n\n` +
          `آخر بطولة: دوري أبطال أفريقيا 2024`;
      }
      if (msg.includes("بطولات")) {
        return `إجمالي البطولات: أكثر من 145\n\n` +
          `- الدوري المصري: 44 مرة\n` +
          `- كأس مصر: 38 مرة\n` +
          `- دوري أبطال أفريقيا: 12 مرة\n` +
          `- كأس السوبر الأفريقي: 8 مرات\n` +
          `- كأس العالم للأندية: برونزية 2021\n\n` +
          `آخر بطولة: دوري أبطال أفريقيا 2024`;
      }
      return "جرب: مين اللعيبة؟ | كل البطولات | مين المدرب؟";
    }

    function askQuick(text) {
      inputEl.value = text;
      sendMessage();
    }

    function sendMessage() {
      const v = inputEl.value.trim();
      if (!v) return;
      addMessage(escapeHtml(v), "user");
      inputEl.value = "";
      setTimeout(() => {
        addMessage(formatBotReply(getReply(v)), "bot");
      }, 600);
    }

    sendBtn.onclick = sendMessage;
    inputEl.addEventListener("keypress", e => { if (e.key === "Enter") sendMessage(); });

    function escapeHtml(s) { return s.replace(/[&<>"]/g, c => ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;' }[c])); }
    function formatBotReply(text) {
      return escapeHtml(text).replace(/\n/g, "<br>");
    }
  </script>
</body>
</html>